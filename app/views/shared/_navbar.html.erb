<div class="navbar-container">
  <% if user_signed_in? %>
    <div class="navbar navbar-expand-sm navbar-light navbar-lewagon <%= @dark_mode ? 'dark-mode' : 'normal-mode' %>" data-target="navbar.navbar">
      <div class="show-web w-100 d-flex justify-content-between align-items-center">
        <%= link_to root_path, class: "nav-link px-0" do %>
          <%= image_tag "logo.png", class: "logo-signed-in" %>
        <% end %>
        <span class="d-flex align-items-center ml-3">
          <%= render 'shared/dark_mode_link' %>
          <%= link_to "Posts", posts_path, class: "nav-link ml-sm-2 ml-md-3 px-sm-2 px-md-3 #{ @dark_mode ? 'light-grey' : 'black' }" %>
          <%= link_to "Tips", tips_path, class: "nav-link px-sm-2 px-md-3 #{ @dark_mode ? 'light-grey' : 'black' }" %>
          <%= link_to "Resources", resources_path, class: "nav-link px-sm-2 px-md-3 #{ @dark_mode ? 'light-grey' : 'black' }" %>
          <%= link_to "Articles", articles_path, class: "nav-link px-sm-2 px-md-3 #{ @dark_mode ? 'light-grey' : 'black' }" %>
          <%#= link_to "Log Out", destroy_user_session_path, method: :delete, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
          <%= link_to user_path(current_user) do %>
            <i class="<%= params[:controller] == 'users' && params[:action] == 'show' ? 'fas fa-user' : 'far fa-user' %> ml-3"></i>
          <% end %>
          <%= link_to notifications_path do %>
            <div class="nav-notifications position-relative">
              <i class="<%= current_user.notifications.unread.any? ? 'fas fa-bell' : 'far fa-bell' %> ml-1 mx-3"></i>
              <% if current_user.notifications.unread.any? %>
                <span class="notification-icon">
                  <%= current_user.notifications.unread.count %>
                </span>
              <% end %>
            </div>
          <% end %>
          <%= link_to conversations_path do %>
            <% if current_user.new_messages.any? %>
              <div class="nav-chat position-relative">
                <i class="fas fa-comment-alt"></i>
                <span class="notification-icon">
                  <%= current_user.new_messages.count %>
                </span>
              </div>
            <% else %>
              <i class="far fa-comment-alt"></i>
            <% end %>
          <% end %>
        </span>
      </div>
      <div class="show-mobile">
        <%= link_to root_path, class: "navbar-brand" do %>
          <%= image_tag "logo.png", class: "logo" %>
          <%= image_tag "#{ @dark_mode ? 'logo-text-white.png' : 'logo-text.png' }", class: "logo-text" %>
        <% end %>
      </div>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" data-action="click->navbar#navbarToggler" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <div class="hamburger">
          <div class="hamburger-stick ham-one"></div>
          <div class="hamburger-stick ham-two"></div>
          <div class="hamburger-stick ham-three"></div>
        </div>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="show-mobile">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <%= link_to "Posts", posts_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
            </li>
            <li class="nav-item">
              <%= link_to "Tips", tips_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
            </li>
            <li class="nav-item">
              <%= link_to "Articles", articles_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
            </li>
            <li class="nav-item">
              <%= link_to "Resources", resources_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
            </li>
            <li class="nav-item">
              <%= link_to "Inbox", conversations_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
            </li>
            <li class="nav-item pt-1">
              <%= render 'shared/dark_mode_link' %>
            </li>
            <li class="nav-item d-flex align-items-center justify-content-start pt-3 pb-2">
              <%= link_to user_path(current_user) do %>
                <i class="far fa-user"></i>
              <% end %>
              <i class="far fa-bell ml-1 mx-3"></i>
              <%= link_to conversations_path do %>
                <% if current_user.new_messages.any? %>
                  <div class="nav-chat position-relative">
                    <i class="far fa-envelope-open"></i></i>
                    <span class="notification-icon">
                      <%= current_user.new_messages.count %>
                    </span>
                  </div>
                <% else %>
                  <i class="far fa-envelope"></i></i>
                <% end %>
              <% end %>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="navbar-spacer" data-target="navbar.spacer"></div>
  <% else %>
    <div class="navbar navbar-expand-sm navbar-light navbar-lewagon justify-content-between" data-target="navbar.navbar">
      <%= link_to root_path, class: "nav-link px-0" do %>
        <%= image_tag "logo.png", class: "logo" %>
        <%= image_tag "logo-text.png", class: "logo-text" %>
      <% end %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" data-action="click->navbar#navbarToggler" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <div class="hamburger">
          <div class="hamburger-stick ham-one"></div>
          <div class="hamburger-stick ham-two"></div>
          <div class="hamburger-stick ham-three"></div>
        </div>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <%= link_to "Posts", posts_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
          </li>
          <li class="nav-item">
            <%= link_to "Tips", tips_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
          </li>
          <li class="nav-item">
            <%= link_to "Resources", resources_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
          </li>
          <li class="nav-item">
            <%= link_to "Articles", articles_path, class: "nav-link #{ @dark_mode ? 'light-grey' : 'black' }" %>
          </li>
          <li class="nav-item">
            <%= link_to "Log in", new_user_session_path, class: "nav-link black" %>
          </li>
        </ul>
      </div>
    </div>
    <div class="navbar-spacer" data-target="navbar.spacer"></div>
  <% end %>
</div>
<% unless params[:controller] == 'pages' && params[:action] == 'home' %>
  <div class="pwa-top-bar <%= @dark_mode ? 'dark-mode' : 'normal-mode' %>" data-target="navbar.pwaTopBar" style="justify-content: <%= user_signed_in? ? 'space-between' : 'center' %>">
    <% if user_signed_in? %>
      <!-- <i class="far fa-bell"></i> -->
      <%= render 'shared/dark_mode_link_pwa' %>
    <% end %>
    <div class="navbar-brand" data-action="click->navbar#scrollTop">
      <%= image_tag "logo.png", class: "pwa-logo" %>
      <%= image_tag "#{ @dark_mode ? 'logo-text-white.png' : 'logo-text.png' }", class: "pwa-logo-text" %>
    </div>
    <% if user_signed_in? %>
      <%= link_to conversations_path, data: { action: 'click->common#showLoader' } do %>
        <% if current_user.new_messages.any? %>
          <div class="nav-chat position-relative">
            <i class="far fa-envelope-open"></i></i>
            <span class="notification-icon">
              <%= current_user.new_messages.count %>
            </span>
          </div>
        <% else %>
          <i class="far fa-envelope"></i></i>
        <% end %>
      <% end %>
    <% end %>
  </div>
  <div class="pwa-top-bar-spacer" data-target="navbar.pwaTopBarSpacer"></div>
<% end %>
